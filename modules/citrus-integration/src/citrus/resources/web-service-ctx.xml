<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:citrus="http://www.citrusframework.org/schema/config"
       xmlns:citrus-ws="http://www.citrusframework.org/schema/ws/config"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.citrusframework.org/schema/config http://www.citrusframework.org/schema/config/citrus-config.xsd
       http://www.citrusframework.org/schema/ws/config http://www.citrusframework.org/schema/ws/config/citrus-ws-config.xsd">
    
    <citrus-ws:jetty-server id="jettyServer" port="8081"
                                             auto-start="true"
                                             context-config-location="classpath:citrus-ws-servlet.xml"
                                             resource-base="src/citrus/resources"/>

    <bean id="axiomMessageFactory" class="org.springframework.ws.soap.axiom.AxiomSoapMessageFactory"/>
    
    <bean id="soapAttachmentValidator" class="com.consol.citrus.ws.validation.SimpleSoapAttachmentValidator"/>
                                                 
    <citrus-ws:message-sender id="webServiceRequestSender"
                              request-url="http://localhost:8081"
                              reply-handler="webServiceReplyHandler"
                              message-factory="axiomMessageFactory"/>
    
    <citrus-ws:reply-message-handler id="webServiceReplyHandler"/>
    
    <citrus:jms-message-receiver id="webServiceRequestReceiver" destination-name="${jms.ws.stub.request}"/>
    
    <citrus:jms-message-sender id="webServiceResponseSender" destination-name="${jms.ws.stub.response}"/>
    
    <citrus-ws:message-sender id="webServiceHelloRequestSender"
                              request-url="http://localhost:8081/hello"
                              reply-handler="webServiceHelloReplyHandler"
                              message-factory="axiomMessageFactory"/>
    
    <citrus-ws:reply-message-handler id="webServiceHelloReplyHandler"/>
    
</beans>
