<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
	 
	<bean name="citrus-integration" class="com.consol.citrus.TestSuite">
		<property name="tasksBefore">
			<list>
				<bean id="initDatabase" class="com.consol.citrus.actions.ExecuteSQLAction">
                    <property name="dataSource" ref="testDataSource"/>
					<property name="statements">
						<list>
							<value>CREATE TABLE ORDERS (ORDER_ID integer, REQUEST_TAG char(250), CONVERSATION_ID  char(250), CREATION_DATE  char(250), DESCRIPTION char(250)) </value>
							<value>CREATE TABLE CUSTOMERS (CUSTOMER_ID integer, NAME char(250), DESCRIPTION char(250))</value>
							<value>CREATE TABLE ERRORS (ERROR_ID integer, DESCRIPTION char(250))</value>
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="tasksBetween">
			<list>
				<ref bean="purgeJmsQueues"/>
			</list>
		</property>
		<property name="tasksAfter">
			<list>
				<bean id="destroyDatabase" class="com.consol.citrus.actions.ExecuteSQLAction">
                    <property name="dataSource" ref="testDataSource"/>
                    <property name="ignoreErrors" value="true"/>
					<property name="statements">
						<list>
							<value>DROP TABLE ORDERS</value>
							<value>DROP TABLE CUSTOMERS</value>
							<value>DROP TABLE ERRORS</value>
						</list>
					</property>
				</bean>
			</list>
		</property>
	</bean>
	
</beans>