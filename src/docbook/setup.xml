<?xml version="1.0" encoding="UTF-8"?>
<chapter id="setup">
  <title>Setup</title>

  <para>This chapter will tell you how to get started with Citrus. It deals with the installation and set up of the framework, 
  so you are ready to use the framework and start writing test cases after reading this chapter.</para> 
  
  <para>After downloading the latest release there are several ways to use Citrus in your project. The next sections will 
  describe to you the Citrus project setup possibilities. Choose on of them and include Citrus into your project.</para>
  
  <para>In case you use Maven in your project you may choose the Maven way described in <xref linkend="setup-using-maven"/>. 
  Others may feel right downloading and unzipping the Citrus archive release manually.</para>

  <section id="setup-download">
    <title>Download</title>

    <para>You can download the latest Citrus release from our homepage 
    <ulink url="http://www.citrusframework.org">http://www.citrusframework.org</ulink></para>
    
    <para>Citrus comes to you as a zipped archive in one of the following packages:</para>
    
    <itemizedlist>
        <listitem><para><emphasis>citrus-x.x-with-dependencies</emphasis></para></listitem>
        <!-- listitem><para><emphasis>citrus-x.x-project</emphasis></para></listitem-->
        <listitem><para><emphasis>citrus-x.x-src</emphasis></para></listitem>
    </itemizedlist>
    
    <para>Usually one would choose the with-dependencies archive in order to use Citrus, because this archive includes the Citrus binaries
    plus all needed dependency libraries. In case you want to get in touch with developing Citrus you should go with the project archive.
    This archive will give you the complete Citrus project sources. Using Maven you will easily be able to build Citrus on your own and
    extend Citrus with your own code.</para>
    
    <para>The src archive is helpful during extension of the framework as it provides the Java sources for you. You may then be able to 
    debug into Citrus classes and have a look at the sources during development of your own features.</para> 
  </section>
  
  <section id="setup-prerequisits">
    <title>Prerequisits</title>
    
    <para>You need following software on your computer, in order to use the Citrus framework:</para>

    <itemizedlist>
        <listitem>
            <para>Java 5.0 or higher</para>
            <para>Installed JDK 5.0 or higher plus JAVA_HOME environment variable set up and pointing to your Java installation 
            directory</para>
        </listitem>
        <listitem>
            <para>Java IDE (optional)</para>
            <para>A Java IDE will help you manage your Citrus project and create and execute test cases. 
            Use the Java IDE you like best (e.g. Eclipse or IntelliJ IDEA).</para>
        </listitem>
        <listitem>
            <para>Maven 2.0.9 or higher (optional)</para>
            <para>Maven will ease up your life when it comes to managing project dependencies and project builds. Maven
            can support you while using Citrus. In case you have a Maven built project it is very easy to include Citrus tests into
            your existing build lifecycle.</para>
        </listitem>
    </itemizedlist>
      
  </section>
  
  <section id="setup-installation">
    <title>Installation</title>

    <para>Once you have downloaded the latest Citrus archive you need to unzip the archive into a suitable 
    location on your local storage.</para>
    
    <para>You are now able to run the built-in testing samples, which also should give you an idea how to use Citrus with
    ANT.</para>
  </section>
  
  <section id="setup-using-maven">
    <title>Using Maven</title>

    <para>Citrus uses <ulink url="http://maven.apache.org/">Maven</ulink> as build tool. Therefore it is also very easy for you to include Citrus into your Maven project.</para>
    
    <para>In case you already use Maven build tool in your project it is most suitable for you to include Citrus as a test-scoped dependency 
    into your Maven project</para>
    
    <itemizedlist>
        <listitem>
            <para>Add Citrus as test-scoped project dependency to your projects POM (pom.xml)</para>
            
            <programlisting>
  &lt;dependency&gt;
    &lt;groupId&gt;com.consol.citrus&lt;/groupId&gt;
    &lt;artifactId&gt;citrus-core&lt;/artifactId&gt;
    &lt;version&gt;0.9&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
            </programlisting>
        </listitem>
        <listitem>
            <para>Add the citrus Maven plugin to your project</para>
            
            <programlisting>
  &lt;plugin&gt;
    &lt;groupId&gt;com.consol.citrus.mvn&lt;/groupId&gt;
    &lt;artifactId&gt;citrus-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;0.9&lt;/version&gt;
    &lt;configuration&gt;
      &lt;author&gt;Mickey Mouse&lt;/author&gt;
      &lt;targetPackage&gt;com.consol.citrus&lt;/targetPackage&gt;
    &lt;/configuration&gt;
  &lt;/plugin&gt;            
            </programlisting>
        </listitem>
        <listitem>
            <para>Create tests using the citrus-maven-plugin (goal: citrus:create-new-test)</para>
        </listitem>
        <listitem>
            <para>Tests will be included into your projects integration-test phase using the surefire plugin</para>
            
            <programlisting>
  &lt;plugin&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.4.3&lt;/version&gt;
    &lt;configuration&gt;
      &lt;skip&gt;true&lt;/skip&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;id&gt;citrus-tests&lt;/id&gt;
        &lt;phase&gt;integration-test&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;test&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;skip&gt;false&lt;/skip&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
  &lt;/plugin&gt;
            </programlisting>
        </listitem>
        <listitem>
            <para>Citrus source directories have to be defined as test sources</para>
            
            <programlisting>
  &lt;testSourceDirectory&gt;src/citrus/java&lt;/testSourceDirectory&gt;
  &lt;testResources&gt;
    &lt;testResource&gt;
      &lt;directory&gt;src/citrus/java&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**&lt;/include&gt;
      &lt;/includes&gt;
      &lt;excludes&gt;
        &lt;exclude&gt;*.java&lt;/exclude&gt;
      &lt;/excludes&gt;
    &lt;/testResource&gt;
    &lt;testResource&gt;
      &lt;directory&gt;src/citrus/tests&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*&lt;/include&gt;
      &lt;/includes&gt;
      &lt;excludes&gt;
      &lt;/excludes&gt;
    &lt;/testResource&gt;
  &lt;/testResources&gt;            
            </programlisting>
        </listitem>
        <listitem>
            <para>Run Maven integration-test phase to execute all tests (goal: integration-test)</para>
        </listitem>
    </itemizedlist>
  </section>
  
</chapter>